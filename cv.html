<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arjun Sharma - Resume</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load html2pdf.js for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Use Inter font family -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e5e7eb;
        }
        /* Style for editable fields */
        [contenteditable="true"]:hover {
            outline: 1px dashed #9ca3af; /* subtle border on hover */
            cursor: text;
        }
        [contenteditable="true"]:focus {
            outline: 2px solid #3b82f6; /* strong blue border on focus */
            background-color: #f9fafb;
            padding: 2px;
            border-radius: 4px;
        }
        /* Style for the delete button, visible only on hover of the container */
        .job-entry:hover .delete-btn,
        .education-entry:hover .delete-btn { /* Added education-entry hover rule */
            opacity: 1;
        }
        .delete-btn {
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
            z-index: 10; 
        }
        /* Custom print styling to ensure a clean, white-paper look */
        @media print {
            body {
                background-color: #fff;
                color: #000;
            }
            .page-container {
                box-shadow: none !important;
                margin: 0 !important;
                padding: 0 !important;
                border: none !important;
            }
            .no-print {
                display: none !important;
            }
            .section-title {
                border-bottom-color: #000 !important;
            }
        }
        /* Custom Button Style for Consistency */
        .action-button {
            transition: background-color 0.15s ease, transform 0.05s ease;
            font-weight: 600;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); /* shadow-md */
            padding-left: 1rem; /* px-4 */
            padding-right: 1rem; /* px-4 */
            padding-top: 0.5rem; /* py-2 */
            padding-bottom: 0.5rem; /* py-2 */
            width: 100%; /* w-full for stacking on small screens */
        }
        .action-button:hover {
            transform: translateY(-1px);
        }
        /* Specific colors */
        .reset-btn { background-color: #dc2626; } /* bg-red-600 */
        .reset-btn:hover { background-color: #b91c1c; } /* hover:bg-red-700 */

        .add-exp-btn { background-color: #4f46e5; } /* bg-indigo-600 */
        .add-exp-btn:hover { background-color: #4338ca; } /* hover:bg-indigo-700 */

        .add-edu-btn { background-color: #ec4899; } /* bg-pink-600 */
        .add-edu-btn:hover { background-color: #db2777; } /* hover:bg-pink-700 */

        .save-btn { background-color: #2563eb; } /* bg-blue-600 */
        .save-btn:hover { background-color: #1d4ed8; } /* hover:bg-blue-700 */

        .download-btn { background-color: #16a34a; } /* bg-green-600 */
        .download-btn:hover { background-color: #15803d; } /* hover:bg-green-700 */

    </style>
</head>
<body onload="loadContent()">

    <!-- Control Panel (Hidden in Print View) -->
    <div class="no-print flex flex-wrap justify-center py-4 bg-gray-100 border-b border-gray-300 space-x-0 sm:space-x-4 space-y-2 sm:space-y-0 px-4">
        <!-- New Reset Button - Updated Class Structure -->
        <button onclick="resetContent();" class="action-button reset-btn text-sm font-semibold text-white mb-2 sm:mb-0 sm:w-auto">
            Reset Resume
        </button>

        <button onclick="addWorkExperience(); showMessage('New job added!');" class="action-button add-exp-btn text-sm font-semibold text-white mb-2 sm:mb-0 sm:w-auto">
            Add Experience
        </button>
        <button onclick="addEducation(); showMessage('New education added!');" class="action-button add-edu-btn text-sm font-semibold text-white mb-2 sm:mb-0 sm:w-auto">
            Add Education
        </button>
        <button onclick="saveContent(); showMessage('Saved!');" class="action-button save-btn text-sm font-semibold text-white mb-2 sm:mb-0 sm:w-auto">
            Save Changes
        </button>
        <button id="downloadPdf" onclick="generatePDF()" class="action-button download-btn text-sm font-semibold text-white w-full sm:w-auto">
            Download PDF
        </button>
    </div>

    <!-- Status Message Box -->
    <div id="status-message" class="fixed top-2 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-xl z-50 transition-opacity duration-300 opacity-0 no-print"></div>

    <!-- Main Resume Container -->
    <!-- Adjusted max-width for better mobile display -->
    <div id="resume-content" class="max-w-screen-lg lg:max-w-4xl mx-auto p-4 sm:p-10 bg-white shadow-xl my-4 sm:my-6 page-container rounded-lg">

        <!-- HEADER / CONTACT INFO -->
        <header class="pb-3 border-b-2 border-gray-700 mb-6">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight" contenteditable="true" id="name">
                Arjun Sharma
            </h1>
            <p class="text-base text-gray-700 mt-1" contenteditable="true" id="title">Full Stack Web Developer | Specializing in Financial Services & Healthcare Tech</p>
            <!-- Adjusted layout for contact info for mobile stacking -->
            <div id="contact-info" class="mt-2 flex flex-col sm:flex-row sm:space-x-8 text-sm text-gray-600" contenteditable="true">
                <span class="mt-0.5">+91-98765-43210</span>
                <span class="mt-0.5">arjun.sharma.dev@gmail.com</span>
                <span class="mt-0.5">linkedin.com/in/arjunsharmadev</span>
            </div>
        </header>

        <!-- OBJECTIVE -->
        <section class="mb-6">
            <h2 class="text-xl font-bold text-gray-800 section-title pb-1 border-b-2 border-gray-400 mb-3 uppercase tracking-wider">Objective</h2>
            <p class="text-gray-700 leading-relaxed text-sm" contenteditable="true" id="objective-text">
                Focused on leveraging full-stack expertise (React, Node.js) to build scalable, secure, and high-performance web applications, primarily seeking challenging opportunities in the FinTech or HealthTech sectors. Aim to drive digital transformation and improve user experience through modern, clean code practices.
            </p>
        </section>

        <!-- WORK EXPERIENCE -->
        <section class="mb-6">
            <h2 class="text-xl font-bold text-gray-800 section-title pb-1 border-b-2 border-gray-400 mb-3 uppercase tracking-wider">Work Experience</h2>

            <div id="work-experience-container" class="space-y-6">
                
                <!-- Amex Entry -->
                <div class="job-entry border-l-4 border-gray-300 pl-4 relative group">
                    <div class="flex justify-between items-start"> 
                        <div class="flex items-center space-x-2">
                            <h3 class="text-lg font-semibold text-gray-800" contenteditable="true" data-placeholder="Job Title">Senior Software Engineer - Web Development</h3>
                            <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.job-entry').remove(); saveContent(); showMessage('Job deleted!');">
                                <span class="mr-0.5">Delete</span>&times;
                            </button>
                        </div>
                        <p class="text-sm font-medium text-gray-600 mt-1" contenteditable="true" data-placeholder="Date Range">Jan 2022 – Present</p>
                    </div>

                    <p class="text-sm text-gray-600 mb-2" contenteditable="true" data-placeholder="Company Name">American Express (AMEX) - Digital Banking</p>

                    <div class="mt-2 text-sm">
                        <ul class="list-disc list-outside ml-5 space-y-1 text-gray-700" contenteditable="true" data-placeholder="List of bullet points">
                            <li>Led frontend development for a new customer financial dashboard, improving load times by 35% using React.js and optimizing state management with Redux.</li>
                            <li>Designed and implemented RESTful APIs using Node.js and Express, handling high-volume transaction data securely, adhering to PCI DSS standards.</li>
                            <li>Collaborated with UX/UI designers to translate wireframes into pixel-perfect, accessible, and responsive cross-browser user interfaces.</li>
                            <li>Managed deployment pipelines on AWS (EC2, S3, CloudFront) ensuring 99.9% uptime for production environments.</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Max Hospital Entry -->
                <div class="job-entry border-l-4 border-gray-300 pl-4 relative group">
                    <div class="flex justify-between items-start"> 
                        <div class="flex items-center space-x-2">
                            <h3 class="text-lg font-semibold text-gray-800" contenteditable="true" data-placeholder="Job Title">Web Developer & IT Intern</h3>
                            <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.job-entry').remove(); saveContent(); showMessage('Job deleted!');">
                                <span class="mr-0.5">Delete</span>&times;
                            </button>
                        </div>
                        <p class="text-sm font-medium text-gray-600 mt-1" contenteditable="true" data-placeholder="Date Range">Aug 2019 – Dec 2021</p>
                    </div>

                    <p class="text-sm text-gray-600 mb-2" contenteditable="true" data-placeholder="Company Name">Max Healthcare Hospital - IT Department</p>

                    <div class="mt-2 text-sm">
                        <ul class="list-disc list-outside ml-5 space-y-1 text-gray-700" contenteditable="true" data-placeholder="List of bullet points">
                            <li>Developed and maintained key modules for the internal Hospital Information System (HIS), focusing on appointment scheduling and patient record access (HIPAA compliant).</li>
                            <li>Utilized HTML5, CSS3, and Vanilla JavaScript to create interactive and user-friendly staff portals, reducing data entry errors by 15%.</li>
                            <li>Wrote and optimized SQL queries for the backend database to efficiently retrieve patient data and generate regulatory reports.</li>
                            <li>Participated in daily Agile standups and sprint planning to deliver incremental software improvements quickly.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </section>

        <!-- EDUCATION AND SKILLS -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- EDUCATION -->
            <section class="md:col-span-2">
                <h2 class="text-xl font-bold text-gray-800 section-title pb-1 border-b-2 border-gray-400 mb-3 uppercase tracking-wider">Educational Qualifications</h2>
                <div id="education-container" class="space-y-4 text-sm text-gray-700"> 
                    
                    <!-- IIT Bombay Entry -->
                    <div class="education-entry relative group">
                        <div class="flex justify-between items-baseline">
                            <div class="flex items-center space-x-2 pr-4">
                                <span class="font-semibold" contenteditable="true" data-placeholder="Degree/Qualification">B.Tech. Computer Science & Engineering</span>
                                <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.education-entry').remove(); saveContent(); showMessage('Education entry deleted!');">
                                    <span class="mr-0.5">Delete</span>&times;
                                </button>
                            </div>
                            <span class="text-xs text-gray-500" contenteditable="true" data-placeholder="Year">2017 – 2021</span>
                        </div>
                        <span class="block text-sm text-gray-600" contenteditable="true" data-placeholder="Institution">Indian Institute of Technology (IIT) Bombay</span>
                    </div>
                    
                    <!-- Delhi International School Entry -->
                    <div class="education-entry relative group">
                        <div class="flex justify-between items-baseline">
                            <div class="flex items-center space-x-2 pr-4">
                                <span class="font-semibold" contenteditable="true" data-placeholder="Degree/Qualification">AISSCE (10+2) - Science Stream</span>
                                <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.education-entry').remove(); saveContent(); showMessage('Education entry deleted!');">
                                    <span class="mr-0.5">Delete</span>&times;
                                </button>
                            </div>
                            <span class="text-xs text-gray-500" contenteditable="true" data-placeholder="Year">2015 – 2017</span>
                        </div>
                        <span class="block text-sm text-gray-600" contenteditable="true" data-placeholder="Institution">Delhi International School, Delhi</span>
                    </div>

                </div>
            </section>

            <!-- SKILLS -->
            <section class="md:col-span-1">
                <h2 class="text-xl font-bold text-gray-800 section-title pb-1 border-b-2 border-gray-400 mb-3 uppercase tracking-wider">Skills</h2>
                <div class="space-y-1 text-gray-700 text-sm">
                    <ul class="list-disc list-outside ml-5 space-y-0.5" id="skills-list" contenteditable="true">
                        <li>Frontend: React, JavaScript (ES6+), HTML5, CSS3</li>
                        <li>Backend: Node.js, Express, RESTful APIs, SQL, MongoDB</li>
                        <li>Tools/Cloud: AWS (EC2, S3), Git/GitHub, Docker, Linux</li>
                        <li>Methodology: Agile/Scrum, CI/CD, Test-Driven Development (TDD)</li>
                        <li>Styling: Tailwind CSS, Responsive Design, Material UI</li>
                    </ul>
                </div>
            </section>
        </div>

        <!-- DECLARATION (Footer) -->
        <footer class="mt-8 pt-4 border-t border-gray-300 text-xs text-gray-500">
            <p contenteditable="true">I hereby declare that all the above information is true to the best of my knowledge and belief.</p>
            <div class="flex justify-between mt-2">
                <p>Date: <span class="text-gray-700" contenteditable="true"></span></p>
                <p>Signature: <span class="text-gray-700 font-medium" contenteditable="true">(Arjun Sharma)</span></p>
            </div>
        </footer>

    </div>

    <!-- JavaScript for PDF Generation and Local Storage -->
    <script>
        // --- Persistence Setup ---
        // List of all editable section IDs.
        const editableSections = ['name', 'title', 'contact-info', 'objective-text', 'work-experience-container', 'education-container', 'skills-list'];

        // Default HTML template for a new job entry
        const defaultJobHtml = `
            <div class="job-entry border-l-4 border-gray-300 pl-4 relative group">
                <div class="flex justify-between items-start">
                    <div class="flex items-center space-x-2">
                        <h3 class="text-lg font-semibold text-gray-800" contenteditable="true" data-placeholder="Job Title">New Job Title</h3>
                        <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.job-entry').remove(); saveContent(); showMessage('Job deleted!');">
                            <span class="mr-0.5">Delete</span>&times;
                        </button>
                    </div>
                    <p class="text-sm font-medium text-gray-600 mt-1" contenteditable="true" data-placeholder="Date Range">Start - End</p>
                </div>
                <p class="text-sm text-gray-600 mb-2" contenteditable="true" data-placeholder="Company Name">New Company Name</p>

                <div class="mt-2 text-sm">
                    <ul class="list-disc list-outside ml-5 space-y-1 text-gray-700" contenteditable="true" data-placeholder="List of bullet points">
                        <li>Key responsibility point 1.</li>
                        <li>Key responsibility point 2.</li>
                    </ul>
                </div>
            </div>
        `;

        // Default HTML template for a new education entry
        const defaultEducationHtml = `
            <div class="education-entry relative group">
                <div class="flex justify-between items-baseline">
                    <div class="flex items-center space-x-2 pr-4">
                        <span class="font-semibold" contenteditable="true" data-placeholder="Degree/Qualification">New Degree/Qualification</span>
                        <button class="delete-btn flex items-center bg-red-100 text-red-700 hover:bg-red-200 rounded-full px-2 py-0.5 text-xs font-medium no-print" onclick="this.closest('.education-entry').remove(); saveContent(); showMessage('Education entry deleted!');">
                            <span class="mr-0.5">Delete</span>&times;
                        </button>
                    </div>
                    <span class="text-xs text-gray-500" contenteditable="true" data-placeholder="Year">YYYY</span>
                </div>
                <span class="block text-sm text-gray-600" contenteditable="true" data-placeholder="Institution">New School or University</span>
            </div>
        `;
        
        // --- Core Functions ---

        // Function to display a temporary status message
        function showMessage(msg) {
            const status = document.getElementById('status-message');
            status.textContent = msg;
            status.classList.remove('opacity-0');
            status.classList.add('opacity-100');
            setTimeout(() => {
                status.classList.remove('opacity-100');
                status.classList.add('opacity-0');
            }, 2000);
        }

        // Function to save content to localStorage
        function saveContent() {
            editableSections.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    // Use outerHTML for the container elements to save the wrapper structure
                    const content = (id === 'work-experience-container' || id === 'education-container') ? element.outerHTML : element.innerHTML;
                    localStorage.setItem('resume_' + id, content);
                }
            });
            console.log("Content saved successfully to local storage.");
        }

        // Function to load content from localStorage
        function loadContent() {
            editableSections.forEach(id => {
                const savedContent = localStorage.getItem('resume_' + id);
                const element = document.getElementById(id);
                
                if (savedContent && element) {
                    if (id === 'work-experience-container' || id === 'education-container') {
                        // For containers, replace the whole element to restore structure
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = savedContent;
                        const newContainer = tempDiv.firstChild;
                        element.parentNode.replaceChild(newContainer, element);
                        // Re-identify the element
                        document.getElementById(id).id = id; 
                    } else {
                        element.innerHTML = savedContent;
                    }
                }
            });
            
            // Re-attach save function to changes on editable fields (e.g., onblur)
            document.querySelectorAll('[contenteditable="true"]').forEach(element => {
                element.addEventListener('blur', saveContent);
            });
            console.log("Content loaded from local storage.");
        }

        // Function to reset content to the original sample
        function resetContent() {
            if (confirm("Are you sure you want to reset the resume? All local changes will be permanently lost.")) {
                // Clear all stored data
                editableSections.forEach(id => {
                    localStorage.removeItem('resume_' + id);
                });
                
                // Reload the page to load the default HTML content
                window.location.reload(); 
            }
        }


        // Function to add a new work experience section
        function addWorkExperience() {
            const container = document.getElementById('work-experience-container');
            // Insert the new job template at the top
            container.insertAdjacentHTML('afterbegin', defaultJobHtml);
            
            // Attach blur event listener to the new editable elements
            container.querySelectorAll('.job-entry:first-child [contenteditable="true"]').forEach(element => {
                element.addEventListener('blur', saveContent);
            });

            saveContent(); // Save the new structure
        }

        // Function to add a new education section
        function addEducation() {
            const container = document.getElementById('education-container');
            // Insert the new education template at the top
            container.insertAdjacentHTML('afterbegin', defaultEducationHtml);
            
            // Attach blur event listener to the new editable elements
            container.querySelectorAll('.education-entry:first-child [contenteditable="true"]').forEach(element => {
                element.addEventListener('blur', saveContent);
            });

            saveContent(); // Save the new structure
        }

        // Function to generate and download PDF
        function generatePDF() {
            // 1. Ensure the latest changes are saved before generating PDF
            saveContent(); 
            
            // 2. Get the person's name
            const nameElement = document.getElementById('name');
            // Clean name for filename: replaces spaces with underscores
            let name = nameElement ? nameElement.textContent.trim().replace(/\s+/g, '_') : 'Resume';
            
            // 3. Get current date and time
            const now = new Date();
            const date = now.getFullYear() + '-' + 
                         String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                         String(now.getDate()).padStart(2, '0');
            const time = String(now.getHours()).padStart(2, '0') + 
                         String(now.getMinutes()).padStart(2, '0') + 
                         String(now.getSeconds()).padStart(2, '0');

            // 4. Construct the filename: [Name]_[YYYY-MM-DD]_[HHMMSS].pdf
            const filename = `${name}_${date}_${time}.pdf`;

            const element = document.getElementById('resume-content');
            
            // 5. Configuration for html2pdf
            const opt = {
                margin: 0.4, // Reduced margin slightly to provide more space
                filename: filename, 
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { 
                    scale: 2, 
                    logging: false, 
                    dpi: 192, 
                    letterRendering: true 
                },
                jsPDF: { 
                    unit: 'in', 
                    format: 'A4', 
                    orientation: 'portrait' 
                },
                // Configuration to be aggressive about keeping content on a single page
                pagebreak: { 
                    mode: 'avoid-all'
                }
            };

            // Use html2pdf library to generate and download the PDF
            html2pdf().from(element).set(opt).save();
            showMessage('Generating PDF...');
        }
    </script>

</body>
</html>